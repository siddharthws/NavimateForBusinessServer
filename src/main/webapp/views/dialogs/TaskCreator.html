<!-- HTML template for Task Creator Dialog -->
<md-dialog class="dialog-container dialog-task-creator d-flex flex-column">
    <div class="dialog-header">
        Create Tasks
        <hr>
    </div>

    <button class="button button-primary" ng-click="add()">Add Task</button>

    <div class="task-creator-table full-flex d-flex col-sm-12">
        <table class="table table-bordered" ng-table="">
            <thead>
                <tr class="row">
                    <th class="col-sm-1">
                        #
                    </th>
                    <th class="col-sm-4">
                        Company
                    </th>
                    <th class="col-sm-3">
                        Rep
                    </th>
                    <th class="col-sm-3">
                        Template
                    </th>
                    <th class="col-sm-1">
                    </th>
                </tr>
            </thead>
            <tr class="row" ng-repeat="task in tasks">
                <td class="text-center col-sm-1">
                    {{$index + 1}}
                </td>
                <td class="col-sm-4" ng-class="{'has-error': !task.lead && bShowError}">
                    <div class="dropdown">
                        <button class="dropdown-toggle" data-toggle="dropdown">
                            {{task.lead.name}}
                        </button>
                        <div class="dropdown-menu task-creator-dropdown">
                            <input type="text" ng-model="leadFilter.name" placeholder="Search">
                            <button class="dropdown-item" ng-repeat="lead in leads | filter:leadFilter" ng-click="task.lead = lead">{{lead.name}}</button>
                        </div>
                    </div>
                </td>

                <td class="col-sm-3" ng-class="{'has-error': !task.rep && bShowError}">
                    <div class="dropdown">
                        <button class="dropdown-toggle" data-toggle="dropdown">
                            {{task.rep.name}}
                        </button>
                        <div class="dropdown-menu task-creator-dropdown">
                            <input type="text" ng-model="repFilter.name" placeholder="Search">
                            <button class="dropdown-item" ng-repeat="rep in team | filter:repFilter" ng-click="task.rep = rep">{{rep.name}}</button>
                        </div>
                    </div>
                </td>

                <td class="col-sm-3" ng-class="{'has-error': !task.template && bShowError}">
                    <div class="dropdown">
                        <button class="dropdown-toggle" data-toggle="dropdown">
                            {{task.template.name}}
                        </button>
                        <div class="dropdown-menu task-creator-dropdown">
                            <input type="text" ng-model="formFilter.name" placeholder="Search">
                            <button class="dropdown-item" ng-repeat="template in formTemplates | filter:formFilter" ng-click="task.template = template">{{template.name}}</button>
                        </div>
                    </div>
                </td>
                <td class="col-sm-1">
                    <input class="icon-button" type="image" src="../../static/images/icon_delete_red.png" ng-click="remove(task)">
                </td>
            </tr>
        </table>
    </div>

    <div class="d-flex justify-content-end dialog-buttons">
        <button class="button button-primary" ng-click="create()">Create</button>
        <button class="button" ng-click="cancel()">Cancel</button>
    </div>
</md-dialog>