<!-- Html view for Table -->
<div ng-controller="TableCtrl as vm" class="h-100 w-100 d-flex flex-column">
    <!-- Table Container -->
    <div class="overflow-auto p-2 bdr-bottom-lighgrey">
        <!-- Table -->
        <table class="table table-striped" ng-if="vm.table.columns.length">
            <!-- Table Headers -->
            <thead>
                <!-- Serial Number column header -->
                <th>
                    #
                </th>

                <!-- Columns returned by server -->
                <th ng-repeat="column in vm.table.columns">
                    <span class="flex-1 text-nowrap">
                        {{column.name}}
                    </span>
                </th>
            </thead>

            <!-- Table Body -->
            <tbody  ng-if="vm.table.rows.length && !vm.bWaiting && !vm.bError">
                <!-- Table Row -->
                <tr ng-repeat="row in vm.table.rows">
                    <!-- Serial Number -->
                    <td>
                        {{($index + 1) + "."}}
                    </td>

                    <!-- Data returned by server -->
                    <td ng-repeat="column in vm.table.columns"  ng-init="value = row.values[column.id]">
                        <!-- Simple Text Value -->
                        <span ng-if="(value == '-') || (column.type != vm.TemplateConst.FIELD_TYPE_PHOTO &&
                                                        column.type != vm.TemplateConst.FIELD_TYPE_SIGN &&
                                                        column.type != vm.TemplateConst.FIELD_TYPE_LOCATION)">
                            {{value}}
                        </span>

                        <!-- Button to open image -->
                        <input type="button" value="" class="ib-base ib-s ib-hover ib-link" title="Open Image"
                               ng-if="(value != '-') && (column.type == vm.TemplateConst.FIELD_TYPE_PHOTO ||
                                                         column.type == vm.TemplateConst.FIELD_TYPE_SIGN)"
                               ng-click="$root.Statics.absorbEvent($event); vm.showImage(value)"/>

                        <!-- Button to open location -->
                        <input type="button" value="" class="ib-base ib-s ib-hover ib-map" title="Open Location"
                               ng-if="(value != '-') && (column.type == vm.TemplateConst.FIELD_TYPE_LOCATION)"
                               ng-click="$root.Statics.absorbEvent($event); vm.showLocation(value)"/>
                    </td>
                </tr>
            </tbody>
        </table>

        <!-- Waiting / Error UI -->
        <div class="d-flex align-items-center justify-content-center mt-1 p-4"
             ng-if="vm.bError || vm.bWaiting || !vm.table.rows.length">
            <!-- Waiting Spinner -->
            <div class="d-flex align-items-center" ng-if="vm.bWaiting">
                <loader ng-if="vm.bWaiting" class="loader-l"></loader>
                <h4 class="ml-2 text-grey">Getting data...</h4>
            </div>

            <!-- Error UI -->
            <div class="d-flex align-items-center" ng-if="vm.bError">
                <img src="/static/images/ic_smiley_sad.png">
                <h4 class="ml-1 text-grey">Could not sync data...</h4>
            </div>

            <!-- No data UI -->
            <div class="d-flex align-items-center" ng-if="!vm.bError && !vm.bWaiting && !vm.table.rows.length">
                <img src="/static/images/ic_smiley_neutral.png">
                <h4 class="ml-1 text-grey">Nothing to show...</h4>
            </div>
        </div>
    </div>
</div>